{
  "info": {
    "name": "Sonexa AI - Tier-Based Processing",
    "description": "Test collection for tier-based AI routing (Azure AI for free tier, OpenAI for paid tiers)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Processing - Free Tier (Azure AI)",
      "item": [
        {
          "name": "Chat - Free Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hello! I'm a free tier user. How are you today?\",\n  \"subscription_tier\": \"free\",\n  \"include_audio\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "chat"]
            }
          }
        },
        {
          "name": "Process Text - Free Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"I'm feeling excited about this new AI project as a free user!\",\n  \"subscription_tier\": \"free\",\n  \"generate_speech\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/process-text",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "process-text"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Processing - Basic Tier (OpenAI)",
      "item": [
        {
          "name": "Chat - Basic Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hello! I'm a basic tier subscriber. Can you help me with my project?\",\n  \"subscription_tier\": \"basic\",\n  \"include_audio\": true,\n  \"preferred_voice\": \"en-US-JennyNeural\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "chat"]
            }
          }
        },
        {
          "name": "Process Text - Basic Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"As a basic tier user, I expect high-quality AI responses and detailed analysis.\",\n  \"subscription_tier\": \"basic\",\n  \"generate_speech\": true,\n  \"voice_name\": \"en-US-AriaNeural\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/process-text",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "process-text"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Processing - Premium Tier (OpenAI)",
      "item": [
        {
          "name": "Chat - Premium Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"I'm a premium subscriber. I need advanced AI analysis for my business data.\",\n  \"subscription_tier\": \"premium\",\n  \"include_audio\": true,\n  \"preferred_voice\": \"en-US-DavisNeural\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "chat"]
            }
          }
        },
        {
          "name": "Process Text - Premium Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"This is premium content that requires the best AI analysis and insights available.\",\n  \"subscription_tier\": \"premium\",\n  \"generate_speech\": true,\n  \"voice_name\": \"en-US-JennyNeural\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/process-text",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "process-text"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Processing - Enterprise Tier (OpenAI)",
      "item": [
        {
          "name": "Chat - Enterprise Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Enterprise user here. I need the most advanced AI capabilities for enterprise-level analysis.\",\n  \"subscription_tier\": \"enterprise\",\n  \"include_audio\": true,\n  \"preferred_voice\": \"en-US-GuyNeural\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "chat"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Testing & Capabilities",
      "item": [
        {
          "name": "Get AI Capabilities",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/ai/capabilities",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "capabilities"]
            }
          }
        },
        {
          "name": "Test Azure AI Config",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/ai/test/azure-speech-config",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "test", "azure-speech-config"]
            }
          }
        },
        {
          "name": "Test OpenAI Config",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/ai/test/openai-config",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "test", "openai-config"]
            }
          }
        },
        {
          "name": "Test Tier Routing",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"This is a test to verify tier-based routing works correctly.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/test/full-pipeline",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "test", "full-pipeline"]
            }
          }
        }
      ]
    },
    {
      "name": "Backwards Compatibility Tests",
      "item": [
        {
          "name": "Chat Without Tier (Should Default to Free)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hello! I didn't specify a tier, so this should default to free tier (Azure AI).\",\n  \"include_audio\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "chat"]
            }
          }
        },
        {
          "name": "Process Text Without Tier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"No tier specified - should use Azure AI by default.\",\n  \"generate_speech\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/ai/process-text",
              "host": ["{{base_url}}"],
              "path": ["api", "ai", "process-text"]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080"
    },
    {
      "key": "jwt_token",
      "value": ""
    }
  ]
}
